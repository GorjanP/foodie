Preheat oven to 325 degrees F (165 degrees C).    
In a small bowl, mix together flour and white sugar. Add chopped nuts if desired. Stir in melted butter or margarine until all ingredients are combined. Press mixture into a 9x13 inch pan.    
Bake in preheated oven for 15 minutes. Allow to cool.    
Beat together cream cheese and confectioners sugar until smooth. Spread over cooled crust.    
Whip cream until stiff peaks form. Spread half of whipped cream over cream cheese layer. In a small bowl, whisk together chocolate pudding mix and 1 1/2 cups milk until smooth. Pour over whipped cream layer. In another small bowl, whisk together vanilla pudding mix and 1 1/2 cups milk. Pour over chocolate layer. Top with remaining whipped cream. Chill overnight.    

