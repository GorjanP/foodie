Preheat oven to 350 degrees F (175 degrees C). Grease and flour a 10x15 inch jellyroll pan. In a large bowl, sift together the flour, sugar, baking soda, cinnamon and salt. Set aside.    
In a saucepan combine 1/2 cup margarine, shortening, 1/4 cup cocoa and water. Bring to a boil and cook for 1 minute. Pour the liquid mixture over the flour, sugar mixture; stir well. Blend in eggs and buttermilk.    
Pour batter into prepared pan. Bake in the preheated oven for 30 minutes, or until a toothpick inserted into the center of the cake comes out clean. Let cake cool 10 minutes, then frost while still warm.    
To make the Frosting:  In a saucepan combine 1/2 cup margarine, milk and 1/4 cup cocoa. Bring to a boil and cook for 1 minute. Remove from heat and stir in vanilla. Mix in confectioners' sugar. Pour over warm cake    

