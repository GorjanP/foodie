Combine rhubarb, apples, 1/2 cup white sugar, and water together in a saucepan; bring to a boil. Cook and stir rhubarb mixture until rhubarb is tender and compote is thickened, about 10 minutes.    
Preheat oven to 350 degrees F (175 degrees C). Grease an 8-inch square baking dish.    
Mix 2/3 cup white sugar, 1/4 cup margarine, egg, and vanilla extract together in a bowl. Stir milk and stir into the sugar mixture. Whisk flour, baking powder, and salt together in a separate bowl. Mix flour mixture into wet mixture until batter is just moistened; pour into the prepared baking dish. Spoon enough compote over cake to make about 1/2-inch-thick layer, reserving any leftover compote for another use.    
Stir oats, 1/2 cup margarine, 1/2 cup white sugar, and cinnamon together in a bowl until crumbly; sprinkle over compote layer.    
Bake in the preheated oven until a toothpick inserted in the middle of the cake comes out clean, 30 to 40 minutes.    

