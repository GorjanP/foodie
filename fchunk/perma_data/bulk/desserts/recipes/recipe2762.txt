Preheat oven to 350 degrees F (175 degrees C).    
In a medium mixing bowl combine flour, butter or margarine, and 1 cup chopped pecans. Beat until thoroughly combined. Press mixture into a 9x13 inch baking dish.    
Bake in preheated oven for 15 minutes. Set aside to cool.    
In a medium mixing bowl combine cream cheese, 2 cups of the whipped topping, confectioners' sugar, and vanilla extract. Beat until smooth. Spread evenly over cooled crust.    
In a large mixing bowl combine pudding, milk, pumpkin puree, pumpkin pie spice, and 2 more cups of whipped topping. Stir until thoroughly combined. Spoon mixture over cream cheese layer. Top with remaining 1 cup of whipped topping. Sprinkle with 1/2 cup chopped pecans if desired. Chill at least 1 hour before serving.    

