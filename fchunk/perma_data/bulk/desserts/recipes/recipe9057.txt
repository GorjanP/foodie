In a large bowl, stir together the flour, baking powder, salt and 1 cup of sugar. Cut in margarine by pinching between your fingers, or using a pastry blender, until the mixture has lumps no larger than small peas. Make a well in the center, and pour in the eggs, 1/2 cup milk and 2 teaspoons vanilla. Stir until the mixture comes together, then knead for about 5 turns on a lightly floured surface.    
Roll out the dough to about 1/4 inch thickness. Grease two 12 cup muffin tins or tart pans. Cut out 20 circles using a 3 inch cookie cutter or drinking glass. Line the muffin cups with the dough. Set aside the remaining dough to cut out tops for the cups.    
In the top of a double boiler, or in a metal bowl set atop a saucepan of simmering water, whisk together the cornstarch and 3/4 cup sugar. Gradually whisk in 3 of the egg yolks, and 1quart milk. Heat, stirring constantly, until thick and bubbling. Remove from the heat, and stir in the butter and 1 teaspoon of vanilla until the butter is melted.    
Preheat the oven to 350 degrees F (175 degrees C). Fill the pastry shells half way with the vanilla cream. Roll out remaining dough, and cut into circles for lids. Place over the top of the pastry shells, and seal the edges by pressing with the tines of a fork. Whisk the remaining egg yolk with a fork, and brush the tops of the pastry cups.    
Bake for 25 minutes in the preheated oven, or until golden brown. Let cool in the tins before carefully loosening the edges to remove. Dust with confectioners' sugar before serving.    

