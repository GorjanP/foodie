Preheat oven to 325 degrees F (165 degrees C).    
In a large bowl, combine flour, butter and nuts until crumbly. Press into the bottom of a 9x13 inch baking dish. Bake in preheated oven for 25 minutes, or until golden. Set aside to cool.    
In a large bowl, beat cream cheese and confectioners' sugar until smooth. Fold in 1 cup whipped topping. Spread over crust. Beat together chocolate pudding mix, milk and vanilla until creamy. Spread over cream cheese layer. Spread remaining 2 cups whipped topping over pudding layer. Refrigerate 2 hours, or until chilled. Garnish with shaved chocolate before serving.    

