Preheat oven to 350 degrees F (175 degrees C). Grease a 10x15-inch jellyroll pan.    
Melt 1 cup butter and 1/3 cup cocoa powder together in a saucepan over low heat, stirring often, until smooth, about 5 minutes. Remove from heat and cool slightly.    
Combine white sugar, flour, and salt together in a large bowl; add chocolate mixture. Beat with an electric mixer on medium speed until blended, 1 to 2 minutes. Add eggs and vanilla extract; stir until combined. Pour batter into prepared jellyroll pan.    
Bake in the preheated oven until edges begin to become crisp, about 20 minutes.    
Warm peanut butter in microwave for about 2 minutes, stirring once. Spread over warm brownies. Chill brownies in refrigerator for 30 minutes.    
Heat 1/2 cup butter, milk, and marshmallows in a saucepan over medium heat, stirring often, until marshmallows are melted, about 5 minutes. Remove from heat; whisk in 1/4 cup cocoa. Gradually stir confectioners' sugar into marshmallow mixture until smooth. Spread frosting over peanut butter layer of brownies. Chill in refrigerator until set, about 20 minutes.    

