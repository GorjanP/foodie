Preheat a wok or skillet on high heat for 1 minute.    
Coat wok thoroughly with 2 tablespoons peanut oil; reduce heat to medium. Cook and stir onion until beginning to soften, about 3 minutes.    
Crack eggs directly into the wok. Stir quickly to scramble until eggs begin to set but are still fluid, about 1 1/2 minutes.    
Stir ham into the wok and cook just until warmed through, about 1 minute.    
Stir butter and remaining 1 tablespoon of peanut oil into the wok; let warm for 10 seconds. Add rice and stir constantly for 3 to 4 minutes, adding more oil if rice begins to stick.    
Season fried rice with salt and pepper; top with Cheddar cheese.    

