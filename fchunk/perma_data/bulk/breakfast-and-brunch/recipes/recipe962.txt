Make the cheese sauce: Melt 3 tablespoons butter in a saucepan on top of the stove. Quickly stir the flour into the saucepan until the mixture is smooth. Stir in the milk, salt and pepper; continue stirring until the mixture is smooth and thick. Finally, stir in the cheese until it is melted.    
Grease a 9x13 inch baking pan.    
In a skillet, saute butter and onions. Pour the beaten eggs and ham into the skillet; scramble until set. Fold the mushrooms and cheese sauce into the eggs. Pour the mixture into the prepared baking pan. Cover and chill for 30 minutes or overnight.    
Preheat oven to 350 degrees F (175 degrees C).    
Bake the egg and mushroom casserole for 30 minutes in the 350 degrees F (175 degrees C) oven.    

